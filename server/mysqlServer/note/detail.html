<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>wine note</title>
</head>
<body>
	<div align='center' id="disp">
		<h2>wine detail</h2>
		<table>
			<tr>
				<td><img id='wineimg'/></td>
				<td align='center'>
					<table>
						<tr height='50'>
							<td width='80'>winename</td>
							<td width='160' id='winename'></td>
						</tr>
						<tr height='50'>
							<td width='80'>vintage</td>
							<td width='160' id='vintage'></td>
						</tr>	
						<tr height='50'>
							<td width='80'>varieties</td>
							<td width='160' id='varieties'></td>
						</tr>
						<tr height='50'>
							<td width='80'>country</td>
							<td width='160' id='country'></td>
						</tr>
						<tr height='50'>
							<td width='80'>notenum</td>
							<td width='160' id='nickname'></td>
						</tr>
						
						<tr>
							<td colspan='2' align='center'
							width='240'>
							<a href="viewall">목록보기</a><br/>
							<a href="#">수정하기</a><br/>
							<a href="#">삭제하기</a><br/>
							</td>
						</tr>
					</table>
				</td>
				</tr>			
		</table>
	</div>
</body>

<script>
	//조회할 itemid 가져오기
	var winenum = sessionStorage["winenum"];
	//ajax 객체 생성 
	var xhr = new XMLHttpRequest();
	//요청 생성
	xhr.open('get', '/note/detail/' + winenum);
	//요청 전송
	xhr.send(null);
	
	//ajax 응답이 온 경우 호출되는 콜백 처리
	xhr.onreadystatechange = function(){
		if(xhr.readyState == 4){
			if(xhr.status >= 200 && xhr.status < 300){
				//데이터 확인
				//alert(xhr.responseText);
				
				//데이터 파싱
				var object = JSON.parse(xhr.responseText);
				//데이터가 있는 경우
				if(object.result == true){
					//item 키의 값을 가져옵니다.
					var wsearch = object.wsearch;
					var wnote = object.wnote;
/* 					document.getElementById("wineimg").src = 
						"../../img/" + wsearch.wineimg; */
					document.getElementById("winename").innerHTML = 
						wsearch.winename;
					document.getElementById("vintage").innerHTML = 
						wsearch.vintage;
					document.getElementById("varieties").innerHTML = 
						wsearch.varieties;
					document.getElementById("country").innerHTML = 
						wsearch.country;
					document.getElementById("notenum").innerHTML = 
						wnote.notenum;
				}else{
					document.getElementById("disp").innerHTML =
						'<h3>데이터가 존재하지 않습니다.</h3>';
				}
			}
		}
	};
</script>

</html>